<!DOCTYPE html>
<html lang>







<head>
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>Assigning Personality Profile to a Chatting Machine for Coherent Conversation Generation | Road To Surika</title>

	<meta name="HandheldFriendly" content="True">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
	<meta name="generator" content="hexo">
	<meta name="author" content="Surika">
	<meta name="description" content>

	
	<meta name="keywords" content>
	

	
	<link rel="shortcut icon" href="/img/flower.png">
	<link rel="apple-touch-icon" href="/img/flower.png">
	

	
	<meta name="theme-color" content="#3c484e">
	<meta name="msapplication-TileColor" content="#3c484e">
	

	

	

	<meta property="og:site_name" content="Road To Surika">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Assigning Personality Profile to a Chatting Machine for Coherent Conversation Generation | Road To Surika">
	<meta property="og:description" content>
	<meta property="og:url" content="http://yoursite.com/2020/02/18/Assigning-Personality-Profile-to-a-Chatting-Machine-for-Coherent-Conversation-Generation/">

	
	<meta property="article:published_time" content="2020-02-18T12:02:00+08:00"> 
	<meta property="article:author" content="Surika">
	<meta property="article:published_first" content="Road To Surika, /2020/02/18/Assigning-Personality-Profile-to-a-Chatting-Machine-for-Coherent-Conversation-Generation/">
	

	
	
	<link rel="stylesheet" href="/css/allinonecss.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->

	
	
	
</head>
<body class="post-template">
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                
                <a class="site-nav-logo" href="/" title="Road To Surika">
                    <img src="/img/58851587_p0.png" alt="Road To Surika">
                </a>
                
                
            </li>
            
            
            <li>
                <a href="/about" title="ABOUT">ABOUT</a>
            </li>
            
            <li>
                <a href="/archives" title="ARCHIVES">ARCHIVES</a>
            </li>
            
            
        </ul> 
    </div>
    
    <div class="search-button-area">
        <a href="#search" class="search-button">Search ...</a>
    </div>
     
    <div class="site-nav-right">
        
        <a href="#search" class="search-button">Search ...</a>
         
        
<div class="social-links">
    
    
    <a class="social-link" title="github" href="https://github.com/surika" target="_blank" rel="noopener">
        <svg viewbox="0 0 1049 1024" xmlns="http://www.w3.org/2000/svg"><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z"/></svg>
    </a>
    
    
    
    
    
    <a class="social-link" title="bilibili" href="https://space.bilibili.com/177405158" target="_blank" rel="noopener">
        <svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M360.896 183.968l-90.912-88.096s-14.208-17.472 9.824-37.248c24.16-19.648 25.376-10.912 33.504-5.472s135.2 130.816 135.2 130.816zm301.952 3.264l90.912-88.096s14.208-17.472-9.824-37.248c-24.032-19.648-25.376-10.912-33.504-5.472s-135.2 130.816-135.2 130.816zM1004 350.336c-3.264-137.984-123.168-164.192-123.168-164.192s-614.336-4.96-742.496 0C10.176 222.304 20 350.336 20 350.336s1.696 274.272-.128 413.12c13.824 138.848 120.864 160.928 120.864 160.928s42.72.864 73.92.864c3.264 8.992 5.696 52.544 54.24 52.544 48.416 0 54.24-52.544 54.24-52.544s354.88-1.696 384.352-1.696c1.696 14.816 8.992 54.976 57.536 54.24 48.416-.864 51.712-57.536 51.712-57.536s16.384-1.696 65.664 0C997.344 898.88 1004 764.192 1004 764.192s-1.568-275.872 0-413.856zm-98.912 439.232c0 21.728-17.248 39.456-38.464 39.456H167.2c-21.248 0-38.464-17.6-38.464-39.456V326.336c0-21.728 17.248-39.456 38.464-39.456h699.424c21.248 0 38.464 17.6 38.464 39.456zM202.4 457.152l205.344-39.456 15.52 77.184-203.648 39.456zm638.976 0l-205.344-39.456-15.648 77.184 203.776 39.456zm-418.08 191.392s45.152 81.312 95.264-26.336c48.416 105.088 101.824 27.904 101.824 27.904l30.336 19.776s-56.672 91.136-131.424 22.208c-63.232 68.928-129.728-21.952-129.728-21.952z"/></svg>
    </a>
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time class="post-full-meta-date" datetime="2020-02-18T04:22:57.000Z">
                    2020-02-18
                </time>
                
                <span class="date-divider">/</span>
                
                
            </div>
            <h1 class="post-full-title">Assigning Personality Profile to a Chatting Machine for Coherent Conversation Generation</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <p><a href="https://www.ijcai.org/Proceedings/2018/0595.pdf" target="_blank" rel="noopener">原文链接-IJCAI 2018</a><br><a href="https://blog.csdn.net/aliceyangxi1987/article/details/75276376" target="_blank" rel="noopener">可供参考的博客</a><br>将<code>个人资料</code>基于聊天系统，以获得连贯一致的对话生成<br>通过人格保持<code>一致性COHERENCE</code>。引入<code>键值对</code>的profile表达形式。<br>本文中personality=profile=identity</p>
<p>为了给聊天机器人设定身份，文章使用有监督的属性检测器 (Profile Detector) 判断用户的问题是否提及聊天机器人的属性设定，以及具体哪一条预设的属性值；然后为了生成包含属性值的一致的回复，文章以属性值为分割点，从属性值到回复句的结尾训练forward decoder，从属性值到回复句的开头训练backward decoder，组成一个双向解码器 (Bidirectional Decoder) ，从而解码得到一个包含属性值的完整回复；此外，为了消除训练数据与预设属性值不一致的问题，文章使用无监督的属性值定位器 (Position Detector) 来帮助模型更好地训练。</p>
<h1 id="0-Abstract"><a href="#0-Abstract" class="headerlink" title="0.Abstract"></a>0.Abstract</h1><p>目标：使用社交媒体上未标注说话人信息的通用聊天数据生成与profile相关的回复。<br>中心思想：使用<code>profile detector</code>检测 在响应用户post时，是否需要使用profile。如果需要，从profile中选择一个键值对，通过<code>双向decoder</code>生成前向和后向的response，从而生成与人格相关的（个性化的）回复。<br>为了使用通用对话数据训练双向decoder，设计<code>position detector</code>来预测给定profile值后，从哪个词的位置开始解码。<br>主要工作：</p>
<ol>
<li>引入键值对列表的形式，可以明确并显式<em>指定人格
</em>显式：生成与预先设置的人格一致的回复*</li>
<li>3个组件<ul>
<li>profile detector</li>
<li>双向decoder</li>
<li>position detector<h1 id="3-Model"><a href="#3-Model" class="headerlink" title="3.Model"></a>3.Model</h1><h2 id="3-1-Task-Definition"><a href="#3-1-Task-Definition" class="headerlink" title="3.1 Task Definition"></a>3.1 Task Definition</h2>输入：post $X = x_1x_2…x_n$,定义为一组键值对的显式profile${<k_i,v_i>|i=1,2,…,K}$。personality中包括的属性有姓名、性别、年龄、体重、位置、星座。<br>输出：生成与profile一致的回复$Y=y_1y_2…y_m$ </k_i,v_i></li>
</ul>
</li>
</ol>
<p>生成过程：</p>
<script type="math/tex; mode=display">P(Y|X),{<k_i,v_i>} = P(z=0|X)·P^{fr}(Y|X) + P(z=1|X)·P^{bi}(Y|X,{k_i,v_i})</script><p>$P(z|X)$指的是给定post $X$后使用profile的概率($P(z|X)$ is the probability of using the profile<br>given post $X$)，由Profile Detector计算得到；<br>$P^{fr}(Y|X)=\prod^m_{t=1}P^{fr}(y_t|Y_{&lt;t},X)$由普通的前向decoder计算得到；<br>Bidirectional Decoder计算得$P^{bi}(Y|X,{k_i,v_i})$</p>
<p>post/response对$<x,y>$从社交媒体收集得到，而profile值可能不会出现在response $Y$里。这导致训练和测试存在差异。<br>    <code>Profile Detector</code>决定是否使用profile；<code>Bidirectional Decoder</code>决定使用<code>X</code>+profile生成<code>Y</code>；</x,y></p>
<h2 id="3-2-Overview"><a href="#3-2-Overview" class="headerlink" title="3.2 Overview"></a>3.2 Overview</h2><p>给定post，<code>profile detector</code>预测是否需要使用profile。如果不需要，用通用seq2seq decoder生成回复；如果需要，<code>profile detector</code>进一步选择一个合适的profile key and value.从所选的profile value开始，使用<code>bidirectional decoder</code>前后向生成一个回复。为了在通用对话数据上训练<code>bidirectional decoder</code>，使用<code>position detector</code>预测给定选择的profile value后，解码开始的词语的位置。<code>position detector</code>在测试阶段不使用。</p>
<h2 id="3-3-Encoder"><a href="#3-3-Encoder" class="headerlink" title="3.3 Encoder"></a>3.3 Encoder</h2><script type="math/tex; mode=display">h_t = GRU(h_{t-1}, x_t)</script><h2 id="3-4-Profile-Detector"><a href="#3-4-Profile-Detector" class="headerlink" title="3.4 Profile Detector"></a>3.4 Profile Detector</h2><p>两个作用</p>
<ol>
<li>检测post是否要用profile回应<br>$P(z|X)(z \in {0,1})$,$z=1$意味着使用profile。e.g.“你今天怎么样”$P(z|X)≈0$.“你今年几岁了”$P(z|X)≈1$。$P(z|X)$是一个用标注数据训练的二分类器。更正式的：<script type="math/tex; mode=display">P(z|X)=P(z|\widetilde{h})=\sigma(W_p\widetilde{h})</script>其中$W_p$是分类器参数，$\widetilde{h}=\sum_j h_j$,即所有隐状态的和。其他elaborated(详尽阐述?)的方法，如基于attention的模型也可以。</li>
<li>选择一个特定键值对，用于回应。<script type="math/tex; mode=display">\beta_i=MLP([\widetilde{h},k_i,v_i])=softmax(W·[\widetilde{h};k_i;v_i])</script>其中$W$是权重，$k_i/v_i$分别是profile key/value的嵌入。$\widetilde{h}=\sum_j h_j$是post的表示。$\beta$是profile keys上的概率分布。<br>具有最大可能性的被选择为最优profile value:$\widetilde{v}=v_j$ ,其中 $j=argmax_i(\beta_i)$.只要获得了profile value$\widetilde{v}$，解码过程可以由<code>双向解码器</code>确定:<script type="math/tex; mode=display">P^{bi}(Y|X,{<k_i,v_i>})=P^{bi}(Y|X,\widetilde{v})</script></li>
</ol>
<h2 id="3-5-Bidirectional-Decoder"><a href="#3-5-Bidirectional-Decoder" class="headerlink" title="3.5 Bidirectional Decoder"></a>3.5 Bidirectional Decoder</h2><p>目标是生成使用profile value的response。设计一个包含前向decoder和后向decoder的双向decoder，最重要的差异之处在于使用<code>position detector</code>预测起始编码位置。<br>假设生成response $Y=(Y^b,\widetilde{v},Y^f)=(y_1^b,…,y^b_{t-1},\widetilde{v},y_{t-1}^f,…,y^f_m)$，其中$\widetilde{v}$是被选中的profile value。双向decoder向后生成$Y^b$，向前生成$Y^f$.<br>backward decoder$(P^b)$从给定profile value值$\widetilde{v}$到response的起点，生成$Y^b$；<br>forward decoder$(P^f)$(<em>注意这个decoder不同于$P^{fr}(y_t|Y_{&lt;t},X)$，fr指的是不使用profile的情况</em>)以已经生成的开始一半（即$P^b$的输出）为输入，从$\widetilde{v}$到response的结尾，生成$Y^f$。<br><em>前向和后向都是以中心词为起点而言，故后向生成前半，前向生成后半。</em><br>过程正式定义：</p>
<script type="math/tex; mode=display">
P^{bi}(Y|X,\widetilde{v})=P^b(Y^b|X,\widetilde{v})*P^f(Y^f|Y^b,X,\widetilde{v})\\
P^b(Y^b|X,\widetilde{v})=\prod^1_{j=t-1}P^b(y^b_j|Y^b_{>j},X,\widetilde{v})\\
P^f(Y^f|Y^b,X,\widetilde{v})=\prod^m_{j=t+1}P^f(y^f_j|Y^f_{<j},Y^b,X,\widetilde{v})</script><p><em>注意$P^b$输入有两部分，而$P^f$输入有三部分，即多了$P^b$。</em></p>
<p>为了在前向解码器中编码更多上下文，生成response的开始一半$Y^b$、以及profile value $\widetilde{v}$,作为前向decoder的起始输入。$P^b$和$P^f$的概率计算：</p>
<script type="math/tex; mode=display">
P^b(y^b_j|Y^b_{>j},X,\widetilde{v})\propto MLP([s^b_j;y^b_{j+1};c^b_j])</script><script type="math/tex; mode=display">
P^f(y^f_j|Y^f_{<j},Y^b,X,\widetilde{v})\propto MLP([s^f_j;y^f_{j-1};c^f_j])</script><p>其中$s_j^{(<em>)}$是相应decoder的状态，$c_j^{(</em>)}$是上下文向量，$* \in {b,f}$,<br>$b$指的是后向decoder，$f$指的是前向decoder。向量根据下面式子更新：</p>
<script type="math/tex; mode=display">
s_j^{(*)}=GRU(s_{j+l}^{(*)},[y_{j+l}^{(*)};c_j^{(*)}])</script><script type="math/tex; mode=display">
c_j^{(*)}=\sum^n_{t=1}\alpha^{(*)}_{j,t}h_t</script><p>其中$\alpha^{(<em>)}_{j,t} \propto MLP([s_{j+l}^{(</em>)},h_t])$可以视为decoder状态$s_{j+l}^{(<em>)}$和encoder隐状态$h_t$之间的相似度。</em>(注意力可看作编&amp;解码器隐状态之间的相似度。)<em><br>$</em>=b$(backward)时$l=1$，$<em>=f$(forward)时$l=-1$.</em>(即对索引的处理，根据后或前向设置+或-1。)*<br>这些MLPs与(3.4节$\beta_i$)</p>
<script type="math/tex; mode=display">\beta_i=MLP([\widetilde{h},k_i,v_i])=softmax(W·[\widetilde{h};k_i;v_i])</script><p>形式相同，参数不同。</p>
<h2 id="3-6-Position-Detector"><a href="#3-6-Position-Detector" class="headerlink" title="3.6 Position Detector"></a>3.6 Position Detector</h2><p>用于为<code>双向decoder</code>提供更多监督。在训练过程中给decoder提供一个起始解码位置。<br>用于确定<code>中心词</code>。<br><strong>目的：找到合适的可以用profile value替代的位置。</strong><br>e.g.</p>
<pre><code>post X=&#39;你1-有2-什么3-特长4&#39;
response Y = &#39;我1-非常2-擅长3-小提琴4&#39;
profile k-v: &lt;特长，钢琴&gt;

position detector预测 response中的&quot;小提琴4&quot;语法上可以被profile value &quot;钢琴&quot;代替，故&quot;小提琴4&quot;被传递到decoder，称为起始解码位置。
</code></pre><p>在测试阶段，同样是从profile value起双向预测整个序列，但在训练集中，这个value可能很少或从未在response里出现，造成了训练与测试不一致（曝光偏差?）。<br>e.g.</p>
<pre><code>profile k-v: &lt;特长，冰球&gt;
冰球可能很少出现在训练集中。
</code></pre><p>换句话说，即使有训练实例$(X,Y,<k,v>)$，value $v$ 可能完全没在$Y$中出现过。因此，双向decoder不知道应该以哪个词为中心词(response里必须包括哪个词)。<br>这导致了训练和测试的不一致：训练时，decoder不知道编码起始位置；但测试时，编码起始位置已经指明。</k,v></p>
<p>$P(j|y_1y_2…y_m,<k,v>),1≤j≤m$表示词语$y_j$被profile value $v$替代的概率。<br>思想：相似度越高越可能被替代</k,v></p>
<script type="math/tex; mode=display">P(j|Y,<k,v>) \propto cos(y_j,v)</script><p>$cos(y_j,v)$即response中的一个词与profile value的<code>余弦相似度</code>。</p>
<h2 id="3-7-Loss-Function-and-Training"><a href="#3-7-Loss-Function-and-Training" class="headerlink" title="3.7 Loss Function and Training"></a>3.7 Loss Function and Training</h2><p>定义两个损失函数：</p>
<ol>
<li>生成概率<br>$D^(c)$是只使用问答对的，$D(pr)$是需要使用profile value的。即两部分的负对数似然函数之和。<script type="math/tex; mode=display">
\begin{align}
\mathcal{L}_1(\theta,D^{(c)},D^{(x,y)})
&=-\sum_{(X,Y)\in D^{(c)}∪ D^{(pr)}} logP(Y|X,{<k_i,v_i>})\\
&=(-\sum_{(X,Y)\in D^{(c)}}logP^{fr}(Y|X))+(-\sum_{(X,Y)\in D^{(pr)}}logP^{bi}(Y|X,\widetilde{v}))\\
&=-\sum_{(X,Y)\in D^{(c)}}logP^{fr}(Y|X)-\sum_{(X,Y)\in D^{(pr)}}logP^{bi}(Y|X,\widetilde{v})
\end{align}</script></li>
<li>profile detector<br>L2 是 profile detector 预测是否用档案及用哪个关键词的，根据前面定义过的$P(z|x)$和$β_i$</li>
</ol>
<h1 id="4-Experiment"><a href="#4-Experiment" class="headerlink" title="4.Experiment"></a>4.Experiment</h1><h1 id="Appendix-双向Decoder"><a href="#Appendix-双向Decoder" class="headerlink" title="Appendix:双向Decoder"></a>Appendix:双向Decoder</h1><p>本文中双向解码参考了论文《Sequence to Backward and Forward Sequences A Content-Introducing Approach to Generative Short-Text Conversation》，有几篇笔记可供参考：<br><a href="https://github.com/xwzhong/papernote/blob/master/chatbot/Sequence%20to%20Backward%20and%20Forward%20Sequences%20A%20Content-Introducing%20Approach%20to%20Generative%20Short-Text%20Conversation.md" target="_blank" rel="noopener">https://github.com/xwzhong/papernote/blob/master/chatbot/Sequence%20to%20Backward%20and%20Forward%20Sequences%20A%20Content-Introducing%20Approach%20to%20Generative%20Short-Text%20Conversation.md</a></p>
<p><a href="https://chuansongme.com/n/1613737151949" target="_blank" rel="noopener">https://chuansongme.com/n/1613737151949</a></p>
<p><a href="http://www.xuwei.io/2019/02/20/%E3%80%8Asequence-to-backward-and-forward-sequences-a-content-introducing-approach-to-generative-short-text-conversation%E3%80%8B%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/" target="_blank" rel="noopener">http://www.xuwei.io/2019/02/20/%E3%80%8Asequence-to-backward-and-forward-sequences-a-content-introducing-approach-to-generative-short-text-conversation%E3%80%8B%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/</a></p>

                </article>
                <ul class="tags-postTags">
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="Variational Autoencoder" href="/2020/02/16/Variational-Autoencoder/">
            Variational Autoencoder →
        </a>
        
    </nav>

    
    <div class="inner">
        <div id="comment"></div>
    </div>
    
</div>

<div class="toc-bar">
    <div class="toc-btn-bar">
        <a href="#site-main" class="toc-btn">
            <svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M793.024 710.272a32 32 0 1 0 45.952-44.544l-310.304-320a32 32 0 0 0-46.4 0.48l-297.696 320a32 32 0 0 0 46.848 43.584l274.752-295.328 286.848 295.808z"/></svg>
        </a>
        <div class="toc-btn toc-switch">
            <svg class="toc-open" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M779.776 480h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M779.776 672h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M256 288a32 32 0 1 0 0 64 32 32 0 0 0 0-64M392.576 352h387.2a32 32 0 0 0 0-64h-387.2a32 32 0 0 0 0 64M256 480a32 32 0 1 0 0 64 32 32 0 0 0 0-64M256 672a32 32 0 1 0 0 64 32 32 0 0 0 0-64"/></svg>
            <svg class="toc-close hide" viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128.287273c-211.584464 0-383.712727 172.128262-383.712727 383.712727 0 211.551781 172.128262 383.712727 383.712727 383.712727 211.551781 0 383.712727-172.159226 383.712727-383.712727C895.712727 300.415536 723.551781 128.287273 512 128.287273z"/><path d="M557.05545 513.376159l138.367639-136.864185c12.576374-12.416396 12.672705-32.671738 0.25631-45.248112s-32.704421-12.672705-45.248112-0.25631l-138.560301 137.024163-136.447897-136.864185c-12.512727-12.512727-32.735385-12.576374-45.248112-0.063647-12.512727 12.480043-12.54369 32.735385-0.063647 45.248112l136.255235 136.671523-137.376804 135.904314c-12.576374 12.447359-12.672705 32.671738-0.25631 45.248112 6.271845 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.103239 22.496761-9.247789l137.567746-136.064292 138.687596 139.136568c6.240882 6.271845 14.432469 9.407768 22.65674 9.407768 8.191587 0 16.352211-3.135923 22.591372-9.34412 12.512727-12.480043 12.54369-32.704421 0.063647-45.248112L557.05545 513.376159z"/></svg>
        </div>
        <a href="#gobottom" class="toc-btn">
            <svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M231.424 346.208a32 32 0 0 0-46.848 43.584l297.696 320a32 32 0 0 0 46.4 0.48l310.304-320a32 32 0 1 0-45.952-44.544l-286.848 295.808-274.752-295.36z"/></svg>
        </a>
    </div>
    <div class="toc-main">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0-Abstract"><span class="toc-text">0.Abstract</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Model"><span class="toc-text">3.Model</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Task-Definition"><span class="toc-text">3.1 Task Definition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Overview"><span class="toc-text">3.2 Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Encoder"><span class="toc-text">3.3 Encoder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-Profile-Detector"><span class="toc-text">3.4 Profile Detector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-Bidirectional-Decoder"><span class="toc-text">3.5 Bidirectional Decoder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-Position-Detector"><span class="toc-text">3.6 Position Detector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-Loss-Function-and-Training"><span class="toc-text">3.7 Loss Function and Training</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Experiment"><span class="toc-text">4.Experiment</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Appendix-双向Decoder"><span class="toc-text">Appendix:双向Decoder</span></a></li></ol>
    </div>
</div>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>




	</div>
	


<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
            

<article class="read-next-card" style="background-image: url(/img/73755434_p1.jpg)">
  <header class="read-next-card-header">
    <small class="read-next-card-header-sitetitle">&mdash; Road To Surika &mdash;</small>
    <h3 class="read-next-card-header-title">Recent Posts</h3>
  </header>
  <div class="read-next-divider">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
      <path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/>
    </svg>
  </div>
  <div class="read-next-card-content">
    <ul>
      
      
      
      <li>
        <a href="/2020/02/18/Assigning-Personality-Profile-to-a-Chatting-Machine-for-Coherent-Conversation-Generation/">Assigning Personality Profile to a Chatting Machine for Coherent Conversation Generation</a>
      </li>
      
      
      
      <li>
        <a href="/2020/02/16/Variational-Autoencoder/">Variational Autoencoder</a>
      </li>
      
      
      
      <li>
        <a href="/2020/02/16/Exploring-Personalized-Neural-Conversational-Models/">Exploring Personalized Neural Conversational Models</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
  <footer class="read-next-card-footer">
    <a href="/archives">  MORE  → </a>
  </footer>
</article>

            
            
            

<article class="read-next-card" style="background-image: url(/img/73755434_p1.jpg)">
    <header class="read-next-card-header tagcloud-card">
        <h3 class="read-next-card-header-title">Categories</h3>
    </header>
    <div class="read-next-card-content">
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Anaconda/">Anaconda</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataScience/">DataScience</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-Learning/">Deep Learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-Learning/Pytorch/">Pytorch</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Dialogue-System/">Dialogue System</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/Algorithms/">Algorithms</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Lesson/">Lesson</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/Deep-Learning/">Deep Learning</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pytorch/">Pytorch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/basis/">basis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/diary/">diary</a></li></ul>
    </div>
</article>


            
            
            

<article class="read-next-card" style="background-image: url(/img/73755434_p1.jpg)">
	<header class="read-next-card-header tagcloud-card">
		<h3 class="read-next-card-header-title">Tag Cloud</h3>
	</header>
	<div class="read-next-card-content-ext">
		<a href="/tags/Anaconda/" style="font-size: 18px;">Anaconda</a> <a href="/tags/DataScience/" style="font-size: 20px;">DataScience</a> <a href="/tags/Graph/" style="font-size: 18px;">Graph</a> <a href="/tags/Hadoop/" style="font-size: 14px;">Hadoop</a> <a href="/tags/Hbase/" style="font-size: 14px;">Hbase</a> <a href="/tags/Hexo/" style="font-size: 16px;">Hexo</a> <a href="/tags/IPython/" style="font-size: 14px;">IPython</a> <a href="/tags/LaTeX/" style="font-size: 14px;">LaTeX</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MachineLearning/" style="font-size: 14px;">MachineLearning</a> <a href="/tags/NLP/" style="font-size: 16px;">NLP</a> <a href="/tags/Nachos/" style="font-size: 22px;">Nachos</a> <a href="/tags/OperatingSystem/" style="font-size: 22px;">OperatingSystem</a> <a href="/tags/PThreads/" style="font-size: 14px;">PThreads</a> <a href="/tags/Paper/" style="font-size: 14px;">Paper</a> <a href="/tags/ParallelProgramming/" style="font-size: 14px;">ParallelProgramming</a> <a href="/tags/Python/" style="font-size: 14px;">Python</a> <a href="/tags/SDU/" style="font-size: 24px;">SDU</a> <a href="/tags/SSH/" style="font-size: 14px;">SSH</a> <a href="/tags/SoftwareEngineer/" style="font-size: 14px;">SoftwareEngineer</a> <a href="/tags/diary/" style="font-size: 22px;">diary</a> <a href="/tags/python/" style="font-size: 14px;">python</a> <a href="/tags/集体智慧编程/" style="font-size: 14px;">集体智慧编程</a>
	</div>
</article>

            
        </div>
    </div>
</aside>

	




<div id="search" class="search-overlay">
    <div class="search-form">
        
        <div class="search-overlay-logo">
        	<img src="/img/flower.png" alt="Road To Surika">
        </div>
        
        <input id="local-search-input" class="search-input" type="text" name="search" placeholder="Search ...">
        <a class="search-overlay-close" href="#"></a>
    </div>
    <div id="local-search-result"></div>
</div>

<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="Road To Surika">Road To Surika &copy; 2020</a>
			
				
			        <span hidden="true" id="/2020/02/18/Assigning-Personality-Profile-to-a-Chatting-Machine-for-Coherent-Conversation-Generation/" class="leancloud-visitors" data-flag-title="Assigning Personality Profile to a Chatting Machine for Coherent Conversation Generation">
			            <span>阅读量 </span>
			            <span class="leancloud-visitors-count">0</span>
			        </span>
	    		
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>






<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        var bLazy = new Blazy()
    })
</script>







<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>




<script id="valineScript" src="//unpkg.com/valine/dist/Valine.min.js" async></script>
<script>
    document.getElementById('valineScript').addEventListener("load", function() {
        new Valine({
            el: '#comment' ,
            verify: false,
            notify: false,
            appId: '',
            appKey: '',
            placeholder: 'Just go go',
            pageSize: 10,
            avatar: 'mm',
            visitor: true
        })
    });
</script>





<script>
    document.getElementById('scriptLoad').addEventListener('load', function(){
        searchFunc("/")
    });
</script>






<script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"superSample":2,"width":300,"height":500,"position":"left","hOffset":0,"vOffset":-10},"mobile":{"show":false,"scale":0.05},"react":{"opacityDefault":1,"opacityOnHover":0.2},"log":false});</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

